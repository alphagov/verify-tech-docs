---
title: Connecting to Verify with a compulsory matching service
weight: 20
---


# Connecting to Verify with a compulsory matching service

## Local development phase

Prerequisites:

- [choose a product and framework](LINK) to integrate your service with GOV.UK Verify
- decide how to [store and manage keys](LINK) and certificates so you can rotate your keys when needed
Note

>You only need to deploy your code to a server at the end of the development phase, when you test your matching service with the SAML compliance tool. You can do all development steps until this point on a development machine.

### Set up the Matching Service Adapter for the SAML compliance tool.

To do this:

1. [Download and install the Matching Service Adapter](LINK).
1. [Generate self-signed certificates for the SAML compliance tool](LINK).
1. [Configure the Matching Service Adapter for the SAML compliance tool](LINK).

Outcome: you can start building your service.

For more information, see [Install and configure the Matching Service Adapter](LINK).

### Build a local matching service.

To do this:

1. [Define your matching strategy](LINK) with your service manager.
1. Use the [example JSON matching request](LINK) and the [JSON schema](LINK) to help build your local matching service.

Outcome: your service can match users’ verified identities to your data sources.

For more information, see [Build a matching service](LINK).

### Build a service that produces and consumes SAML.

To do this:

1. [Connect your service to the Matching Service Adapter metadata](LINK).
1. [Send an authentication request to the GOV.UK Verify hub](LINK).
1. [Handle the SAML response from the GOV.UK Verify hub](LINK) .

Outcome: you’re ready to run SAML compliance tests.

For more information, see [How SAML works with GOV.UK Verify](LINK) and the [Identity Assurance Hub Service SAML 2.0 Profile](LINK).

### Run SAML compliance tests.

To do this:

1. [Test your service with the SAML compliance tool](LINK).
1. [Test your matching service with the SAML compliance tool](LINK).

Outcome: your service and matching service can consume and produce valid SAML.

For more information, see [How SAML works with GOV.UK Verify](LINK).

## Development in the Integration environment

### Request access to the integration environment.

To do this:

1. [Obtain signed certificates](LINK) for the integration environment from the IDAP test certificate authority.
1. [Fill in the ‘Request access to an environment‘ form](LINK).

Outcome: you’re ready to connect the Matching Service Adapter and your service to the integration environment.

For more information, see [GOV.UK Verify environments](LINK) and [How a PKI works](LINK).

### Connect the Matching Service Adapter and your service to the integration environment.

To do this:

1. [Download and install the Matching Service Adapter](LINK).
2. [Configure the Matching Service Adapter for the integration environment](LINK).

Outcome: you’re ready to run end-to-end testing with test users.

For more information, see [Install and configure the Matching Service Adapter](LINK) and [GOV.UK Verify environments](LINK).

### Run end-to-end testing of all your user journeys in the integration environment.

To do this:

1. Set up authentication to manage test users.
1. Create test users.
1. Run end-to-end tests.

Outcome: your service can handle all the possible outcomes of end-to-end user journeys.

For more information, see [GOV.UK Verify environments](LINK).

### Request access to the production environment.

To do this:

1. Obtain [signed certificates](LINK) for the production environment from the IDAP certificate authority.
1. [Fill in the ‘Request access to an environment‘ form](LINK).

Outcome: you’re ready to connect the Matching Service Adapter and your service to the production environment.

For more information, see [GOV.UK Verify environments](LINK) and [How a PKI works](LINK).

### Connect the Matching Service Adapter and your service to the production environment.

To do this:

1. [Download and install the Matching Service Adapter](LINK).
2. [Configure the Matching Service Adapter for the production environment](LINK).

Outcome: your service is ready to go live.

For more information, see [Install and configure the Matching Service Adapter](LINK) and [GOV.UK Verify environments](LINK).

## Maintenance

### Rotate your keys.

When the certificates containing your public keys are due to expire, [replace your keys and certificates](LINK).

Outcome: the encryption and signing certificates for your service and Matching Service Adapter are up to date.

For more information, see [How a PKI works](LINK).

<%= partial "partials/links" %>
